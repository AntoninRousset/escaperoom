<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1'>
		<title>Escape room - {{game_name}}</title>
		<link rel='stylesheet' type='text/css' href='ressources/monitor.css'>
		<link rel='stylesheet' type='text/css' href='ressources/page.css'>
		<script src='ressources/game.js' type='module'></script>
		<script src='ressources/puzzles.js' type='module'></script>
		<script src='ressources/cameras.js' type='module'></script>
		<script src='ressources/devices.js' type='module'></script>
		<script src='ressources/clues.js' type='module'></script>
	</head>
	<body>
		<game-box class='box' src='/{{game_name}}/game'>
			<template>
				<link rel='stylesheet' type='text/css'
					  href='ressources/game.css'>
				<div class='screen' name='game'>
					<div class='section scroll-y'>
						<p id='game-name'><slot name='name'></slot></p>
						<p class='time-dial' id='game-chronometer'><slot name='chronometer'></p>
						<div id='game-start-end'>
							<div id='game-start'>
								<p id='game-not-started'></p>
								<p id='game-start-time'>start: <slot class='time-dial' name='start_time'></p>
							</div>
							<div id='game-end'>
								<p id='game-not-ended'></p>
								<p id='game-end-time'>end: <slot class='time-dial' name='end_time'></p>
							</div>
						</div>
						<game-issues>
							liste des problèmes
						</game-issues>
					</div>
					<game-menu class='section scroll-y' src='{{game_name}}/game'>
						<fieldset id='game-options'>
							<legend>Options de la partie</legend>
							<div class='game-option'>
								<label for='game-option-status'>Type de partie:</label>
								<select id='game-option-status'>
									<option value='official'>official</option>
									<option value='test'>test</option>
									<option value='debug'>debug</option>
								</select>
							</div>
							<div class='game-option'>
								<label for='game-option-number-player'>Nombre de joueur:</label>
								<input type='number' id='game-option-number-player' value='01' min='0'>
							</div>
							<div class='game-option'>
								<label for='game-option-children'>Mode enfant:</label>
								<input type='checkbox' id='game-option-children'>
							</div>
							<div class='game-option'>
								<label for='game-option-timeout-enabled'>Duration:</label>
								<div id='game-option-timeout'>
									<input type='checkbox' id='game-option-timeout-enabled' name='timeout-enabled'>
									<input type='number' id='game-option-timeout-h' name='timeout-h' value='01' min='0'>
									<label for='game-option-timeout-h'>h</label>
									<input type='number' id='game-option-timeout-m' name='timeout-m' value='00' min='0' max='59'>
									<label for='game-option-timeout-m'>m</label>
								</div>
							</div>
							<div class='game-option'>
								<input type='reset' id='game-option-reset' value='Options par défaut'>
							</div>
						</fieldset>
						<div id='game-controls'>
							<button class='game-control' id='stop-game' dangerous>Arrêter la partie</button>
							<input class='game-control' type='submit' id='new-game' value='Nouvelle partie'>
							<button class='game-control' id='back-to-game'>Continuer</button>
						</div>
					</game-menu>
				</div>
				<puzzles-box class='screen' name='puzzles' src='/{{game_name}}/puzzles'>
					<template>
						<link rel='stylesheet' type='text/css'
							  href='ressources/puzzles.css'>
						<div class='screen' name='graph'>
							<button id='menu-button'>X</button>
							<puzzles-graph class='dark metro section scroll-y'>
							</puzzles-graph>
							<puzzle-info class='section scroll-y' src='/{{game_name}}/puzzle'>
								<template>
									<link rel='stylesheet' type='text/css'
										  href='ressources/puzzles.css'>
									<div class='screen' name='info'>
										<h1 id='puzzle-name'><slot name='name'></slot></h1>
										<div id='puzzle-state'><slot name='state'></slot></div>
										<p id='puzzle-description'><slot name='description'></slot></p>
										<h2>Conditions</h2>
										<puzzle-conditions>
											<template>
												<link rel='stylesheet' type='text/css'
													  href='ressources/puzzles.css'>
												<div class='screen' name='conditions'>
												<details>
													<summary></summary>
												</details>
												</div>
												<div class='screen' name='empty'>No conditions</div>
											</template>
										</puzzle-conditions>
										<h2>Actions</h2>
										<p>Un puzzle s'active lorsqu'un de ces parents est complété.</p>
										<p>Un puzzle est complété lorsque, actif, toutes ses conditions sont satisfaites.</p>
										<div id='puzzle-controls'>
												<button class='puzzle-control' id='puzzle-activate' dangerous>Activer</button>
												<button class='puzzle-control' id='puzzle-complete' dangerous>Completer</button>
											<button class='puzzle-control' id='puzzle-restore' dangerous>Restaurer</button>
										</div>
									</div>
									<div class='screen' name='loading'>Loading</div>
									<div class='screen' name='empty'>Select a puzzle</div>
									<div class='screen' name='error'>Error</div>
								</template>
							</puzzle-info>
						</div>
						<div class='screen' name='loading'>Loading</div>
						<div class='screen' name='empty'>No puzzle</div>
					</template>
				</puzzles-box>
				<div class='screen' name='loading'>Loading</div>
				<div class='screen' name='error'>Error</div>
			</template>
		</game-box>
		<cameras-box class='box dark' src='/{{game_name}}/cameras'>
			<template>
				<link rel='stylesheet' type='text/css'
					  href='ressources/cameras.css'>
				<div class='screen' name='main'>
					<cameras-list class='panel scroll-x'>
						<template>
							<link rel='stylesheet' type='text/css'
								  href='ressources/cameras.css'>
							<camera-video autoplay src='/{{game_name}}/camera'>
								no video
							</camera-video>
						</template>
					</cameras-list>
					<video autoplay muted id='bigscreen'></video>
				</div>
				<div class='screen' name='loading'>Loading</div>
				<div class='screen' name='empty'>No camera</div>
				<div class='screen' name='error'>Error</div>
			</template>
		</cameras-box>
		<devices-box class='box' src='/{{game_name}}/devices'>
			<template>
				<link rel='stylesheet' type='text/css'
					  href='ressources/devices.css'>
				<div class='screen' name='main'>
					<devices-list>
						<template> 
							<link rel='stylesheet' type='text/css'
								  href='ressources/devices.css'>
							<div class='selectable'>
								<slot name="name">name</slot>
							</div>
						</template>
					</devices-list>
				</div>
				<div class='screen' name='empty'>No device</div>
				<div class='screen' name='loading'>Loading</div>
				<div class='screen' name='error'>Error</div>
				<device-info class='scroll-y' src="/{{game_name}}/device">
					<template>
						<div class='screen' name='main'>
							<p>name: <slot name="name"></slot></p>
							<p>msg: <slot name="msg"></slot></p>
							<p>addr: <slot name="addr"></slot></p>
							<p>Attibutes:
							<attrs-list>
								<template>
									"<slot name="name"></slot>"
									(<slot name="type"></slot>):
									<slot name="value"></slot>
								</template>
							</attrs-list>
							</p>
						</div>
						<div class='screen' name='empty'>Select a device</div>
						<div class='screen' name='loading'>Loading</div>
						<div class='screen' name='error'>Error</div>
					</template>
				</device-info>
			</template>
		</devices-box>
		<clues-box class='box' src='/{{game_name}}/clues'>
			<input type='text' value='clue'></input>
			<button>send</button>
		</clues-box>
	</body>
</html>
